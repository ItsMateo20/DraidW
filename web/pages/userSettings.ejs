<!DOCTYPE html>
<html lang="en">

    <head>
        <!-- Google Tag Manager -->
        <script>(function (w, d, s, l, i) {
                w[l] = w[l] || []; w[l].push({
                    'gtm.start':
                        new Date().getTime(), event: 'gtm.js'
                }); var f = d.getElementsByTagName(s)[0],
                    j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                        'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
            })(window, document, 'script', 'dataLayer', 'GTM-P54VCBX');</script>
        <!-- End Google Tag Manager -->


        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" href="../assets/images/BigGear.png" type="image/x-icon">
        <meta name="copyright" content="Draid">
        <meta name="language" content="EN, PL">
        <meta name="author" content="ItsMateo20, itsmateo20@gmail.com and Waret, draidbusiness@gmail.com">
        <meta name="owner" content="ItsMateo20">
        <meta name="designer" content="ItsMateo20">
        <title>
            <%= body[0] %>
        </title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
        <link rel="stylesheet" href="../assets/styles/Main.css">
        <style>
            .navbarmargin {
                margin-top: 10vh;
            }


            @media (max-width: 1200px) {
                .navbarmargin {
                    margin-top: 12vh;
                }
            }

            @media (max-width: 992px) {
                .navbarmargin {
                    margin-top: 15vh;
                }
            }

            @media (max-width: 768px) {
                .navbarmargin {
                    margin-top: 15vh;
                }
            }

            @media (max-width: 480px) {
                .navbarmargin {
                    margin-top: 15vh;
                }
            }
        </style>
    </head>

    <body>
        <div class="container">
            <%- include('../partials/header.ejs') %>
                <div class="navbarmargin text-center text-muted">
                    <img src="<%= avatar %>" height="150" width="150" style="border-radius: 50%;" alt="useravatar">
                    <h3>
                        <%= globalname %>
                    </h3>
                    <a href="/user" class="btn btn-outline-secondary">Go back to profile</a>
                    <input id="save" type="button" class="btn btn-outline-danger" onclick="SaveData()"
                        value="Save changes" />
                    <% if (success) { %>
                        <h5 class="text-success" style="font-size: 15px;">Settings updated successfully</h5>
                        <% } %>
                </div>
                <div class="divider mt-3"></div>
                <div id="settings">
                    <div class="container mt-3">
                        <form id="SendNewData" action="/user/settings" method="POST">
                            <div id="profile">
                                <div class="card mt-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Change email</h5>
                                        <div class="mb-3">
                                            <input type="email" class="form-control" maxlength="50" id="email"
                                                name="email" placeholder="<%= settings.email %>"
                                                value="<%= settings.email %>">
                                        </div>
                                    </div>
                                </div>
                                <div class="card mt-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Change number</h5>
                                        <div class="mb-3">
                                            <input type="tel" class="form-control" maxlength="20" id="number"
                                                name="number" placeholder="<%= settings.number %>"
                                                value="<%= settings.number %>">
                                        </div>
                                    </div>
                                </div>
                                <div class="card mt-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Change bio</h5>
                                        <div class="mb-3">
                                            <input type="text" class="form-control" maxlength="500" id="bio" name="bio"
                                                placeholder="<%= settings.bio %>" value="<%= settings.bio %>">
                                        </div>
                                    </div>
                                </div>
                                <div class="card mt-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Change urls</h5>
                                        <div class="mb-3">
                                            <label for="github" class="card-text">Github:</label>
                                            <input type="url" class="form-control" maxlength="100" id="github"
                                                name="github" placeholder="<%= settings.github %>"
                                                value="<%= settings.github %>">
                                        </div>
                                        <div class="mb-3">
                                            <label for="youtube" class="card-text">Youtube:</label>
                                            <input type="url" class="form-control" maxlength="100" id="youtube"
                                                name="youtube" placeholder="<%= settings.youtube %>"
                                                value="<%= settings.youtube %>">
                                        </div>
                                        <div class="mb-3">
                                            <label for="spotify" class="card-text">Spotify:</label>
                                            <input type="url" class="form-control" maxlength="100" id="spotify"
                                                name="spotify" placeholder="<%= settings.spotify %>"
                                                value="<%= settings.spotify %>">
                                        </div>
                                        <div class="mb-3">
                                            <label for="twitter" class="card-text">Twitter:</label>
                                            <input type="url" class="form-control" maxlength="100" id="twitter"
                                                name="twitter" placeholder="<%= settings.twitter %>"
                                                value="<%= settings.twitter %>">
                                        </div>
                                        <div class="mb-3">
                                            <label for="instagram" class="card-text">Instagram:</label>
                                            <input type="url" class="form-control" maxlength="100" id="instagram"
                                                name="instagram" placeholder="<%= settings.instagram %>"
                                                value="<%= settings.instagram %>">
                                        </div>
                                        <div class="mb-3">
                                            <label for="twitch" class="card-text">Twitch:</label>
                                            <input type="url" class="form-control" maxlength="100" id="twitch"
                                                name="twitch" placeholder="<%= settings.twitch %>"
                                                value="<%= settings.twitch %>">
                                        </div>
                                        <div class="mb-3">
                                            <label for="reddit" class="card-text">Reddit:</label>
                                            <input type="url" class="form-control" maxlength="100" id="reddit"
                                                name="reddit" placeholder="<%= settings.reddit %>"
                                                value="<%= settings.reddit %>">
                                        </div>
                                        <div class="mb-3">
                                            <label for="website" class="card-text">Website:</label>
                                            <input type="url" class="form-control" maxlength="100" id="website"
                                                name="website" placeholder="<%= settings.website %>"
                                                value="<%= settings.website %>">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
        </div>
        <%- include('../partials/footer.ejs') %>
            <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P54VCBX" height="0" width="0"
                    style="display:none;visibility:hidden"></iframe></noscript>
    </body>

    <script>
        const inputs = document.querySelectorAll("input, select");
        for (const el of inputs) {
            el.oldValue = el.value + el.checked;
        }

        var setEnabled;
        (setEnabled = function () {
            var e = true;
            for (const el of inputs) {
                if (el.oldValue != el.value + el.checked) {
                    e = false;
                    break;
                }
            }
            document.getElementById("save").disabled = e;
        })();

        document.oninput = setEnabled;
        document.onchange = setEnabled; 
    </script>

    <script>
        function SaveData() {
            document.getElementById("SendNewData").submit();
        }
    </script>
    <script src="../assets/javascript/headertab.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
        integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous">
        </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
        crossorigin="anonymous"></script>

</html>